{"name":"Evohome 2.0 - Zone","type":"virtual_device","properties":{"deviceIcon":1163,"currentIcon":"1163","log":"","logTemp":"","mainLoop":"","ui.lblError.value":"","ui.lblMode.value":"Off","ui.lblStatus.value":"Scheduled","ui.lblTempCurrent.value":"19.5 ","ui.lblTempSet.value":"15 ","ui.lblTempory.value":"","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"Current","name":"lblTempCurrent","favourite":false,"main":false}]},{"type":"label","elements":[{"id":2,"lua":false,"waitForResponse":false,"caption":"Set","name":"lblTempSet","favourite":false,"main":false}]},{"type":"button","elements":[{"id":3,"lua":true,"waitForResponse":false,"caption":"-0.5","name":"btnDown","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal icon = fibaro:get(selfId, \"deviceIcon\");\nfibaro:call(selfId, \"setProperty\", \"currentIcon\", icon)\n\nif fibaro:get(selfId, \"ui.lblTempory.value\") == \"\" then\n  oldSetTemp = fibaro:get(selfId, \"ui.lblTempSet.value\")\nelse\n  oldSetTemp = fibaro:get(selfId, \"ui.lblTempory.value\")\nend\nnewSetTemp = tonumber(oldSetTemp)-0.5\nfibaro:call(selfId, \"setProperty\", \"ui.lblTempory.value\",newSetTemp..\" \")\n\n\n","buttonIcon":0,"favourite":false,"main":true},{"id":4,"lua":true,"waitForResponse":false,"caption":"+0.5","name":"btnUp","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal icon = fibaro:get(selfId, \"deviceIcon\");\nfibaro:call(selfId, \"setProperty\", \"currentIcon\", icon)\n\nif fibaro:get(selfId, \"ui.lblTempory.value\") == \"\" then\n  oldSetTemp = fibaro:get(selfId, \"ui.lblTempSet.value\")\nelse\n  oldSetTemp = fibaro:get(selfId, \"ui.lblTempory.value\")\nend\nnewSetTemp = tonumber(oldSetTemp)+0.5\nfibaro:call(selfId, \"setProperty\", \"ui.lblTempory.value\",newSetTemp..\" \")\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"label","elements":[{"id":5,"lua":false,"waitForResponse":false,"caption":"","name":"lblTempory","favourite":false,"main":false}]},{"type":"button","elements":[{"id":6,"lua":true,"waitForResponse":false,"caption":"Cancel","name":"btnCancel","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal zoneID = fibaro:getName(selfId);\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nlocal selfId = fibaro:getSelfId();\nlocal icon = fibaro:get(selfId, \"deviceIcon\");\nfibaro:call(selfId, \"setProperty\", \"currentIcon\", icon)\nfibaro:setGlobal(\"EvohomeAPI\", \"cancel,,\"..locationID..\",\"..zoneID..\",,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)\nfibaro:call(selfId, \"setProperty\", \"ui.lblTempory.value\",\"\")\nfibaro:call(selfId, \"setProperty\", \"ui.lblError.value\", \"Setting data, please wait...\")\n","buttonIcon":0,"favourite":false,"main":false},{"id":7,"lua":true,"waitForResponse":false,"caption":"Set","name":"btnSet","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal zoneID = fibaro:getName(selfId);\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nlocal selfId = fibaro:getSelfId();\nlocal icon = fibaro:get(selfId, \"deviceIcon\");\nfibaro:call(selfId, \"setProperty\", \"currentIcon\", icon)\n\nif fibaro:get(selfId, \"ui.lblTempory.value\") == \"\" then\n  fibaro:call(selfId, \"setProperty\", \"ui.lblError.value\", \"No new value set\")\nelse\n  SetTemp = fibaro:get(selfId, \"ui.lblTempory.value\")\n  fibaro:setGlobal(\"EvohomeAPI\", \"settemp,,\"..locationID..\",\"..zoneID..\",\"..SetTemp..\",\")\n  fibaro:sleep(2000)\n  fibaro:startScene(sceneID)\n  fibaro:call(selfId, \"setProperty\", \"ui.lblTempory.value\",\"\")\n  fibaro:call(selfId, \"setProperty\", \"ui.lblError.value\", \"Setting data, please wait...\")\nend\n","buttonIcon":0,"favourite":false,"main":false}]},{"type":"label","elements":[{"id":8,"lua":false,"waitForResponse":false,"caption":"Status","name":"lblStatus","favourite":false,"main":false}]},{"type":"label","elements":[{"id":9,"lua":false,"waitForResponse":false,"caption":"Mode","name":"lblMode","favourite":false,"main":false}]},{"type":"label","elements":[{"id":10,"lua":false,"waitForResponse":false,"caption":"","name":"lblError","favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}