{"name":"Evohome 2.0","type":"virtual_device","properties":{"deviceIcon":1163,"currentIcon":"1163","log":"","logTemp":"","mainLoop":"local selfId = fibaro:getSelfId();\nlocal TimeOfDay = fibaro:getGlobal(\"TimeOfDay\");\nfibaro:call(selfId, \"pressButton\", \"9\");\nif (TimeOfDay == \"night\") then\n  -- Wait 60 minutes:\n  fibaro:sleep(60*60*1000)\nelse\n  -- Wait 15 minutes:\n  fibaro:sleep(15*60*1000)\nend","ui.lblError.value":"","ui.lblOverview.value":"Badkamer: 18 (15) °C <br />Hal: 16.5 (10) °C <br />Jord: 16 (10) °C <br />Kantoor: 17 (15) °C <br />Keuken: 19.5 (15) °C <br />Kris: 16.5 (10) °C <br />Master: 15.5 (10) °C <br />Woonkamer: 21 (21) °C <br />","ui.lblQuickActions.value":"Auto","ui.lbllastUpdate.value":"Mon Feb  8 21:21:54 2016","visible":"true","rows":[{"type":"label","elements":[{"id":1,"lua":false,"waitForResponse":false,"caption":"Quick Actions","name":"lblQuickActions","favourite":false,"main":true}]},{"type":"button","elements":[{"id":2,"lua":true,"waitForResponse":false,"caption":"Auto","name":"btnQAAuto","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nfibaro:setGlobal(\"EvohomeAPI\", \"mode,Auto,\"..locationID..\",,,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":false},{"id":3,"lua":true,"waitForResponse":false,"caption":"Eco","name":"btnQAEco","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nfibaro:setGlobal(\"EvohomeAPI\", \"mode,AutoWithEco,\"..locationID..\",,,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":4,"lua":true,"waitForResponse":false,"caption":"Away","name":"btnQAAway","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nfibaro:setGlobal(\"EvohomeAPI\", \"mode,Away,\"..locationID..\",,,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":false},{"id":5,"lua":true,"waitForResponse":false,"caption":"Day off","name":"btnQADayoff","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nfibaro:setGlobal(\"EvohomeAPI\", \"mode,DayOff,\"..locationID..\",,,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":false}]},{"type":"button","elements":[{"id":6,"lua":true,"waitForResponse":false,"caption":"Heating off","name":"btnQAHeatingoff","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nfibaro:setGlobal(\"EvohomeAPI\", \"mode,HeatingOff,\"..locationID..\",,,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":false},{"id":7,"lua":true,"waitForResponse":false,"caption":"Custom","name":"btnQACustom","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nfibaro:setGlobal(\"EvohomeAPI\", \"mode,Custom,\"..locationID..\",,,\")\nfibaro:sleep(2000)\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":false}]},{"type":"label","elements":[{"id":8,"lua":false,"waitForResponse":false,"caption":"","name":"lblOverview","favourite":false,"main":false}]},{"type":"button","elements":[{"id":9,"lua":true,"waitForResponse":false,"caption":"Update","name":"btnUpdate","empty":false,"msg":"local selfId = fibaro:getSelfId();\nlocal locationID = fibaro:get(selfId, 'IPAddress');\nlocal sceneID = fibaro:get(selfId, 'TCPPort');\n\nif fibaro:getGlobalValue(\"EvohomeAPI\") == \"0\" then\n  fibaro:log(\"Connecting...\");\n  fibaro:setGlobal(\"EvohomeAPI\", \"update,,\"..locationID..\",,,\")\n  fibaro:debug(\"Updating\")\n  fibaro:sleep(2000)\nend\nfibaro:startScene(sceneID)","buttonIcon":1163,"favourite":false,"main":true}]},{"type":"label","elements":[{"id":10,"lua":false,"waitForResponse":false,"caption":"","name":"lbllastUpdate","favourite":false,"main":false}]},{"type":"label","elements":[{"id":11,"lua":false,"waitForResponse":false,"caption":"","name":"lblError","favourite":false,"main":false}]}]},"actions":{"pressButton":1,"setSlider":2,"setProperty":2}}